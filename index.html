<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Лицей</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
    --green:#1e7f4f;
    --green-light:#3ddc84;
    --glass:rgba(255,255,255,0.12);
}

*{box-sizing:border-box}

body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    background:#0f1f18;
    overflow:hidden;
    height:100vh;
}

.background{
    position:fixed;
    inset:0;
    background:url("school.jpg") center/cover no-repeat;
    filter:brightness(0.75);
}

.overlay{
    position:fixed;
    inset:0;
    backdrop-filter:blur(14px);
    background:linear-gradient(135deg, rgba(30,127,79,0.55), rgba(0,0,0,0.5));
}

.logo{
    position:fixed;
    top:25px;
    left:25px;
    width:120px;
}

.app{
    position:relative;
    z-index:2;
    height:100%;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
}

h1{
    font-size:64px;
    color:white;
    margin-bottom:50px;
}

.menu{
    display:flex;
    gap:20px;
    flex-wrap:wrap;
    justify-content:center;
}

.menu button{
    min-width:260px;
    padding:18px 28px;
    border:none;
    border-radius:28px;
    font-size:18px;
    color:white;
    cursor:pointer;
    background:linear-gradient(135deg,var(--green),#125c35);
    transition:.3s;
}

.menu button:hover{
    transform:translateY(-4px);
}

/* Страницы */
.page{
    position:absolute;
    inset:0;
    padding:120px 100px;
    overflow:auto;
    display:none;
}

.page.active{display:block}

.card{
    background:var(--glass);
    backdrop-filter:blur(30px);
    border-radius:32px;
    padding:50px;
    color:white;
}

/* VK-посты */
.vk-posts{
    margin-top:40px;
    display:flex;
    flex-direction:column;
    gap:30px;
}

.vk-post{
    background:rgba(0,0,0,0.45);
    padding:30px;
    border-radius:25px;
    backdrop-filter:blur(20px);
}

.vk-post img{
    width:100%;
    border-radius:20px;
    margin-top:15px;
}

.vk-date{
    font-size:14px;
    opacity:0.6;
    margin-bottom:10px;
}

/* Таймер */
.timer-wrapper{
    display:flex;
    gap:30px;
    justify-content:center;
    margin-top:40px;
}

.time-box{
    background:rgba(0,0,0,0.5);
    padding:30px 40px;
    border-radius:25px;
    backdrop-filter:blur(20px);
    text-align:center;
    box-shadow:0 20px 50px rgba(0,0,0,0.5);
}

.time-box span{
    display:block;
    font-size:48px;
    font-weight:700;
    color:var(--green-light);
}

.time-box label{
    font-size:14px;
    opacity:0.8;
}

/* Назад */
.back{
    position:fixed;
    top:30px;
    right:30px;
    padding:12px 20px;
    border-radius:20px;
    border:none;
    background:var(--green);
    color:white;
    cursor:pointer;
}
</style>
</head>
<body>

<div class="background"></div>
<div class="overlay"></div>
<img src="logo.png" class="logo">

<div class="app" id="mainApp">
<h1>Добро пожаловать</h1>
<div class="menu">
<button onclick="openPage('news')">Новости</button>
<button onclick="openPage('about')">О школе</button>
<button onclick="openPage('projects')">Наши проекты</button>
<button onclick="openPage('olymp')">Олимпиады</button>
<button onclick="openPage('safety')">Счётчик дней без травматизма</button>
</div>
</div>

<div id="page" class="page"></div>
<button class="back" id="backBtn" onclick="closePage()" style="display:none;">Назад</button>

<script>
const page=document.getElementById("page");
const main=document.getElementById("mainApp");
const backBtn=document.getElementById("backBtn");
let timerInterval;

function openPage(type){
    main.style.display="none";
    page.classList.add("active");
    backBtn.style.display="block";
    page.innerHTML="";

    if(type==="news"){
        page.innerHTML=`
        <div class="card">
        <h2>Новости</h2>
        <div id="vk_posts" class="vk-posts"></div>
        </div>`;
        loadVKPosts();
    }

    if(type==="about"){
        page.innerHTML=`
        <div class="card">
        <h2>О школе</h2>
        <p>
        <strong>Общее количество работников:</strong> 99 человек<br>
        <strong>Административные сотрудники:</strong> 5 человек<br>
        <strong>Педагогический состав:</strong> 94 человека<br>
        <strong>Количество классов:</strong> 36<br>
        <strong>Количество обучающихся:</strong> 1002
        </p>
        </div>`;
    }

    if(type==="projects"){
        page.innerHTML=`
        <div class="card">
        <h2>Наши проекты</h2>
        <p>Информация будет добавлена.</p>
        </div>`;
    }

    if(type==="olymp"){
        page.innerHTML=`
        <div class="card">
        <h2>Олимпиады</h2>
        <p>Данные будут добавлены.</p>
        </div>`;
    }

    if(type==="safety"){
        page.innerHTML=`
        <div class="card">
        <h2>Счётчик дней без травматизма</h2>
        <div class="timer-wrapper">
            <div class="time-box"><span id="days">0</span><label>ДНЕЙ</label></div>
            <div class="time-box"><span id="hours">0</span><label>ЧАСОВ</label></div>
            <div class="time-box"><span id="minutes">0</span><label>МИНУТ</label></div>
            <div class="time-box"><span id="seconds">0</span><label>СЕКУНД</label></div>
        </div>
        </div>`;
        startTimer();
    }
}

function closePage(){
    page.classList.remove("active");
    page.innerHTML="";
    main.style.display="flex";
    backBtn.style.display="none";
    clearInterval(timerInterval);
}

/* Таймер */
const startDate=new Date("2026-01-01T00:00:00");
function startTimer(){
    clearInterval(timerInterval);
    timerInterval=setInterval(()=>{
        let diff=new Date()-startDate;
        let d=Math.floor(diff/(1000*60*60*24));
        let h=Math.floor((diff/(1000*60*60))%24);
        let m=Math.floor((diff/(1000*60))%60);
        let s=Math.floor((diff/1000)%60);
        document.getElementById("days").innerText=d;
        document.getElementById("hours").innerText=h;
        document.getElementById("minutes").innerText=m;
        document.getElementById("seconds").innerText=s;
    },1000);
}

/* Lightbox */
function openImage(src){
    let lb=document.createElement("div");
    lb.className="lightbox";
    lb.innerHTML=`<img src="${src}">`;
    lb.onclick=()=>document.body.removeChild(lb);
    document.body.appendChild(lb);
}

/* Новости через RSSHub + бесплатный прокси */
async function loadVKPosts(){
    const container=document.getElementById("vk_posts");
    try{
        const response=await fetch(
            "https://api.allorigins.win/raw?url=" +
            encodeURIComponent("https://rsshub.app/vk/group/ldlyceum")
        );
        const text=await response.text();
        const parser=new DOMParser();
        const xml=parser.parseFromString(text,"text/xml");
        const items=xml.querySelectorAll("item");
        container.innerHTML="";
        items.forEach((item,index)=>{
            if(index>=5) return; // максимум 5 новостей
            const title=item.querySelector("title").textContent;
            const description=item.querySelector("description").textContent;
            const date=new Date(item.querySelector("pubDate").textContent);
            container.innerHTML+=`
                <div class="vk-post">
                    <div class="vk-date">${date.toLocaleDateString("ru-RU")}</div>
                    <div>${description}</div>
                </div>
            `;
        });
    }catch(e){
        container.innerHTML="<p>Ошибка загрузки новостей</p>";
    }
}
</script>
</body>
</html>
